<html>
  <head>
    <title>Routes Staging App Redirect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script>
      document.addEventListener("DOMContentLoaded", function (event) {
        var link = document.getElementById("link");

        var baseUri = "";
        const url = new URL(window.location);
        const linkingUrl = url.searchParams.get("linkingUrl");
        if (linkingUrl) {
          const releaseChannel = url.searchParams.get("release-channel");
          const deeplink = releaseChannel
            ? linkingUrl + `&${releaseChannel}`
            : linkingUrl;
          link.href = deeplink;
          window.location = deeplink;
        }

        const redirectInterval = setInterval(() => {
          var countdown = document.querySelector(".countdown");
          var t = parseInt(countdown.innerText, 10);
          t -= 1;
          countdown.innerText = t;
        }, 1000);

        setTimeout(function () {
          window.location = "https://routes.life";
          clearInterval(redirectInterval);
        }, 5000);
      });
    </script>
  </head>

  <body>
    <p>
      Redirecting in
      <span class="countdown">5</span> seconds
    </p>
    <a id="link">Open App</a>
  </body>
</html>
